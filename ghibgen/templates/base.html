<!-- ghibgen/templates/base.html -->
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}Ghibli Image Generator{% endblock %}</title>
  <link rel="icon" href="{% static 'img/favicon.png' %}" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root {
      --bg: #0b0e13; --panel: rgba(20,23,31,.7); --stroke: rgba(255,255,255,.1);
      --muted: #9aa4b2; --text: #e7edf6;
      --accent1:#8b5cf6; --accent2:#3b82f6; --accent3:#10b981; --accent4:#f59e0b; --accent5:#ef4444;
    }
    body {
      min-height: 100vh;
      background:
        radial-gradient(1000px 1000px at 10% -10%, rgba(59,130,246,.08), transparent 40%),
        radial-gradient(1200px 1200px at 100% 10%, rgba(139,92,246,.08), transparent 40%),
        linear-gradient(180deg, #0a0d12 0%, #0b0e13 100%);
      color: var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Inter, Roboto, "Helvetica Neue", Arial;
      letter-spacing: .1px;
    }
    .glass { background: var(--panel); border:1px solid var(--stroke); border-radius:18px; backdrop-filter: blur(18px) saturate(140%); box-shadow: 0 28px 80px -24px rgba(0,0,0,.65), inset 0 1px 0 rgba(255,255,255,.05); overflow: hidden; }
    .glass-header{display:flex;align-items:center;justify-content:space-between;padding:14px 18px;border-bottom:1px solid var(--stroke);background:linear-gradient(180deg, rgba(255,255,255,.04), transparent 70%)}
    .dot{width:10px;height:10px;border-radius:50%}.dot.red{background:#ef4444}.dot.amber{background:#f59e0b}.dot.green{background:#10b981}
    .brandline{height:3px;border-radius:999px;background:linear-gradient(90deg,var(--accent5),var(--accent4),var(--accent3),var(--accent2),var(--accent1));background-size:300% 100%;animation:flow 6s linear infinite}
    @keyframes flow{0%{background-position:0%}100%{background-position:300%}}
    .field{width:100%;border-radius:14px;background:rgba(14,17,24,.75);color:var(--text);border:1px solid rgba(255,255,255,.1);padding:.75rem 1rem;transition:.25s}
    .field::placeholder{color:var(--muted)} .field:focus{outline:none;border-color:transparent;box-shadow:0 0 0 3px rgba(139,92,246,.5);background:rgba(12,15,22,.9)}
    .btn{border-radius:12px;padding:.75rem 1.1rem;font-weight:600;border:1px solid rgba(255,255,255,.12);background:linear-gradient(180deg, rgba(139,92,246,.95), rgba(59,130,246,.95));color:white;transition:all .2s ease}
    .btn:hover{transform:translateY(-1px);filter:brightness(1.05)} .btn.secondary{background:linear-gradient(180deg, rgba(31,41,55,.9), rgba(17,24,39,.9));color:#e5e7eb}
    .preview{aspect-ratio:1/1;background:rgba(10,13,19,.6);border:1px dashed rgba(255,255,255,.15);border-radius:16px;display:grid;place-items:center;overflow:hidden}
    .preview img{width:100%;height:100%;object-fit:cover}
    /* Spinner overlay */
    .overlay{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;align-items:center;justify-content:center;z-index:50}
    .spin{width:52px;height:52px;border-radius:50%;border:5px solid rgba(255,255,255,.25);border-top-color:white;animation:spin 1s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}
  </style>
  {% block extra_head %}{% endblock %}
</head>
<body>
  <div id="busy" class="overlay"><div class="spin"></div></div>

  <header class="wrap mx-auto px-6 pt-6">
    <div class="glass">
      <div class="glass-header">
        <div class="flex items-center gap-2"><span class="dot red"></span><span class="dot amber"></span><span class="dot green"></span></div>
        <h1 class="font-bold">Ghibli Image Generator</h1>
        <div class="text-xs text-slate-300">Model: SD 1.5</div>
      </div>
      <div class="brandline"></div>
    </div>
  </header>

  <main class="wrap mx-auto px-6 py-8">{% block content %}{% endblock %}</main>

  <footer class="wrap mx-auto px-6 pb-8 text-center text-slate-400 text-xs">
    Made for fun • Not affiliated with Studio Ghibli • Images run locally
  </footer>

  {% block extra_js %}{% endblock %}
  <script>
    // Simple submit spinner
    document.addEventListener("submit", e => {
      if (e.target.matches("form")) {
        document.getElementById("busy").style.display = "flex";
        const btn = e.target.querySelector("button[type=submit]");
        if (btn) { btn.disabled = true; btn.textContent = "Generating..."; }
      }
    });
  </script>
</body>
</html>
